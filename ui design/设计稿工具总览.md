# 钢琴识谱应用 - Figma 设计稿工具总览

## 📦 统一插件工具

### 🎯 主插件：钢琴识谱练习工具
**文件**：`code.js`

**这是一个统一的 Figma 插件，包含以下所有功能：**

#### 1. 🏠 创建应用首页
**包含内容**：
- 应用标题和副标题
- 统计卡片（连续天数、练习次数、准确率）
- 开始练习按钮（渐变样式）
- 练习模式列表（音符识别、视奏挑战、和弦练习）
- 今日目标卡片
- 底部导航栏

**使用场景**：应用首页，展示核心功能入口

---

#### 2. 📈 创建学习进度页面
**包含内容**：
- 页面标题区域
- 本周概览卡片（紫色渐变，显示4个关键指标）
- 每日得分条形图（周一到周日）
- 成就激励卡片网格（2x2布局）
- 下一个目标提示卡片
- 底部导航栏

**使用场景**：学习进度追踪，用户数据可视化

**参考文档**：`学习进度页面使用说明.md`、`更新说明.md`

---

#### 3. ⚙️ 创建设置页面 ⭐ 最新添加
**包含内容**：
- 页面标题区域
- 用户信息卡片（头像、姓名、学习状态）
- 练习设置区域（音符与练习、音效设置、练习提醒）
- 账户与帮助区域（账户信息、帮助中心、关于应用）
- 底部版本信息
- 底部导航栏

**使用场景**：用户个性化设置，账户管理

**参考文档**：`设置页面使用说明.md`

**独立文件**：`create-settings-page.js`（可单独运行）

---

#### 4. 📚 创建练习模式与今日目标
**包含内容**：
- 练习模式卡片列表（音符识别、视奏挑战、和弦练习）
- 今日目标卡片
- 进度条

**使用场景**：展示练习模式和每日目标

---

#### 5. 🎹 创建钢琴键盘
**包含内容**：
- 一个八度的钢琴键盘（7个白键 + 5个黑键）
- 音符标签（C, D, E, F, G, A, B 和 C#, D#, F#, G#, A#）

**使用场景**：音符识别、练习界面

---

#### 6. 🎨 创建设计系统示例
**包含内容**：
- 完整的颜色系统展示
- 文字系统示例
- 渐变示例

**使用场景**：设计系统文档，开发参考

---

## 🎨 设计系统文件

### 核心配置文件

| 文件 | 说明 |
|------|------|
| `design-tokens.js` | 完整的设计令牌（颜色、字体、间距、组件规范） |
| `design-colors.js` | 颜色配置（兼容旧代码） |
| `design-utils.js` | 工具函数（创建卡片、按钮、文本等） |

### 文档文件

| 文件 | 说明 |
|------|------|
| `ui设计稿生成规范.md` | **必读**：设计稿生成的完整规范和流程 |
| `DESIGN_TOOLS_USAGE.md` | 设计工具使用指南 |
| `QUICK_REFERENCE.md` | 快速参考：常见错误和解决方案 |
| `错误处理流程.md` | 错误处理和调试指南 |
| `学习进度页面使用说明.md` | 学习进度页面的详细说明 |

---

## 🚀 快速开始

### 步骤 1：了解设计规范
首先阅读 `ui设计稿生成规范.md`，了解：
- 颜色使用规范（SOLID vs 渐变）
- 文字创建规范（字体加载顺序）
- 代码组织规范（内联代码，不使用模块）

### 步骤 2：运行插件
1. 打开 **Figma 桌面应用**
2. 打开你的设计文件
3. 点击 `Plugins` → `Development` → `Import plugin from manifest`
4. 选择 `ui design/code.js` 文件（**只需要这一个文件！**）
5. 在弹出的插件面板中选择需要创建的设计稿：
   - 🏠 创建应用首页
   - 📈 创建学习进度页面
   - 📚 创建练习模式与今日目标
   - 🎹 创建钢琴键盘
   - 🎨 创建设计系统示例

### 步骤 3：等待生成
点击按钮后，插件会自动生成设计稿，完成后会显示成功提示。

### 步骤 4：自定义数据（可选）
编辑 `code.js` 文件中的数据变量，根据实际需求调整内容。详见各功能的文档说明。

---

## 📐 设计规范速查

### 屏幕尺寸
- **宽度**：375px（移动端标准）
- **高度**：812px（移动端标准）

### 间距系统
- **页面边距**：24px
- **卡片间距**：12-24px
- **内边距**：16-24px

### 颜色系统
| 用途 | 颜色 | Hex |
|------|------|-----|
| 主色 | Indigo 600 | #4F46E5 |
| 辅助色 | Purple 600 | #9333EA |
| 背景色 | Gray 50 | #F9FAFB |
| 白色 | White | #FFFFFF |
| 主要文字 | Gray 800 | #1F2937 |
| 次要文字 | Gray 600 | #4B5563 |
| 边框 | Gray 200 | #E5E7EB |

### 字体系统
| 用途 | 大小 | 字重 |
|------|------|------|
| 页面标题 | 24px | Medium (500) |
| 区块标题 | 16px | Medium (500) |
| 数据数值 | 24px | Medium (500) |
| 正文 | 16px | Regular (400) |
| 辅助文字 | 14px | Regular (400) |
| 小字 | 12px | Regular (400) |

### 圆角系统
- **主要卡片**：16px
- **小卡片**：12px
- **圆形元素**：9999px

---

## 🛠️ 开发新设计稿的流程

### 1. 需求分析
- 明确页面功能和内容
- 确定布局结构
- 规划组件层次

### 2. 准备工作
- 查阅 `ui设计稿生成规范.md`
- 确认颜色和字体定义
- 参考现有设计稿代码

### 3. 编写代码
- 复制现有设计稿作为模板
- 遵循设计规范编写代码
- 使用 `design-tokens.js` 中的设计令牌

### 4. 测试验证
- 在 Figma 中运行测试
- 检查控制台无错误
- 验证视觉效果

### 5. 文档更新
- 创建使用说明文档
- 更新本总览文档
- 记录特殊处理方案

---

## ⚠️ 常见问题

### Q1: 运行插件时报错 "require is not defined"
**A**: 代码中使用了 `require` 或 `import`，需要改为内联定义。

### Q2: 颜色显示不正确，报错 "Unrecognized key(s) in object: 'a'"
**A**: SOLID 类型颜色不能包含 `a` 属性，只使用 `{ r, g, b }`。

### Q3: 渐变不显示，报错 "Required value missing at gradientTransform"
**A**: 渐变必须包含 `gradientTransform: [[1, 0, 0], [0, 1, 0]]`。

### Q4: 文本创建失败
**A**: 确保按顺序操作：加载字体 → 设置 fontName → 设置 fontSize → 设置 characters。

### Q5: 如何修改数据？
**A**: 编辑对应的 `.js` 文件，找到数据变量（如 `stats`、`dailyScores`），修改数值即可。

更多问题请参考 `错误处理流程.md` 和 `QUICK_REFERENCE.md`。

---

## 📝 设计稿清单

### 已完成（集成在统一插件中）
- [x] 首页设计稿
- [x] 学习进度页面
- [x] 设置页面 ⭐ **最新添加**
- [x] 练习模式与今日目标
- [x] 钢琴键盘组件
- [x] 设计系统示例

### 待开发
- [ ] 完整练习页面（横屏）
- [ ] 启动页
- [ ] 反馈页面
- [ ] 成就详情页面

---

## 🔗 相关资源

- **Figma 插件 API 文档**：https://www.figma.com/plugin-docs/
- **Inter 字体**：https://fonts.google.com/specimen/Inter
- **Lucide 图标库**：https://lucide.dev/

---

## 版本历史

### v1.3 - 2024-12-17 ⭐ **当前版本**
- ✅ **新增设置页面设计稿**
- ✅ 插件现在包含 6 个功能模块
- ✅ 创建独立的设置页面插件文件（`create-settings-page.js`）
- ✅ 新增设置页面使用说明文档
- ✅ 优化代码结构，提供独立和统一两种使用方式

### v1.2 - 2024-12-17
- ✅ 将学习进度页面集成到统一插件中
- ✅ 插件现在包含 5 个功能模块
- ✅ 优化插件界面和用户体验
- ✅ 新增更新说明文档

### v1.1 - 2024-12
- ✅ 新增学习进度页面设计稿
- ✅ 新增学习进度页面使用说明
- ✅ 新增设计稿工具总览文档

### v1.0 - 2024-12
- ✅ 首页设计稿
- ✅ 设计系统配置文件
- ✅ 设计规范文档

---

**维护者**：钢琴识谱应用开发团队  
**最后更新**：2024-12

